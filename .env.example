# Shared
NODE_ENV=development

# Auth (session cookie signing)
COOKIE_SECRET=dev-secret-change-in-production

# API port (defaults to 3001 if not set)
PORT=3001

# Database (local Docker: postgres://postgres:postgres@localhost:5432/project_auto)
DATABASE_URL=postgres://postgres:postgres@localhost:5432/project_auto

# Redis (local Docker: redis://localhost:6379)
REDIS_URL=redis://localhost:6379

# Web app API base URL (for Next.js client-side calls)
NEXT_PUBLIC_API_URL=http://localhost:3001

# CORS allowed origins (comma-separated, e.g. http://localhost:3000,https://app.projectauto.com)
# - In development: if not set, all origins are allowed (origin: true)
# - In production: if not set, CORS is disabled (origin: false) for security
# - If set: only listed origins are allowed (exact match required)
CORS_ORIGIN=

# Supabase (API + Storage) - required for creative generation
# Create buckets: "creatives" and "logos" (public read enabled)
SUPABASE_URL=
SUPABASE_SERVICE_ROLE_KEY=
SUPABASE_ANON_KEY=

# Admin API
# - In development: set ALLOW_INSECURE_ADMIN=true to skip x-admin-key (else require it).
# - In production: always require x-admin-key matching ADMIN_API_KEY.
ADMIN_API_KEY=
ALLOW_INSECURE_ADMIN=

# Show Admin link in user dashboard (set to "true" to enable)
NEXT_PUBLIC_SHOW_ADMIN_LINK=

# Meta OAuth dev mode (set to "true" to enable fake connect endpoint)
ALLOW_DEV_META=false
NEXT_PUBLIC_ALLOW_DEV_META=false

# Ads module dev mode (set to "true" to enable simulated publish)
ALLOW_DEV_ADS_PUBLISH_SIM=false

# Meta real write mode (set to "true" to enable real Meta API calls for campaign creation)
# WARNING: This will create PAUSED campaigns in your Meta ad account. Requires ads_management scope.
ALLOW_REAL_META_WRITE=false

# Internal Meta test mode (for E2E testing with our own ad account)
# WARNING: When enabled, the test customer will use Project Auto's ad account instead of their own.
# Set META_TEST_MODE=true and provide META_TEST_CUSTOMER_ID and META_TEST_AD_ACCOUNT_ID.
META_TEST_MODE=false
META_TEST_CUSTOMER_ID=  # UUID of the internal test customer
META_TEST_AD_ACCOUNT_ID=  # Meta ad account ID (act_123... or just 123...)

# Meta Step 4: Ad Creative + Ad (link ad). Required when ALLOW_REAL_META_WRITE=true.
META_PAGE_ID=           # Facebook Page ID for the ad creative (required for creating ad creatives)
META_DESTINATION_URL=   # Optional: destination URL for the ad link (fallback: inventory source website URL)

# Meta Option 1: Partner Access + System User (production)
# Required for production: system user token; OAuth optional but recommended for ad account discovery.
META_BUSINESS_MANAGER_ID=  # Project Auto Business Manager ID
META_SYSTEM_USER_ACCESS_TOKEN=  # System User access token (long-lived; used for all Graph API writes/reads)
META_PARTNER_NAME=Project Auto  # Display only (optional)

# Meta OAuth (optional; recommended for customer ad account discovery)
META_APP_ID=
META_APP_SECRET=
META_REDIRECT_URL=  # Full callback URL (e.g. https://xxxx.ngrok-free.app/meta/oauth/callback)
META_OAUTH_SCOPES=ads_management,business_management  # Recommended: ads_management,business_management (changing scopes requires reconnect)
META_GRAPH_VERSION=v21.0  # Default if omitted
META_STATE_SECRET=  # Optional: dedicated secret for OAuth state signing (defaults to COOKIE_SECRET)

# Web app URL for OAuth redirects (defaults to http://localhost:3000 in dev)
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Enable Meta OAuth in web UI (set to "true" to show Connect Meta button)
NEXT_PUBLIC_META_ENABLED=false

# Meta / crawling vendors (stored as env vars only)
META_ACCESS_TOKEN=
META_AD_ACCOUNT_ID=
AGENTQL_API_KEY=